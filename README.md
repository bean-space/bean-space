# <img src="https://github.com/user-attachments/assets/ae443b93-c257-433c-ba1b-fc501ef07929" width="30" height="30"> ë¹ˆ ê³µê°„ - Bean Space
 > ê°œë°œ ê¸°ê°„: 2024.07.12 ~ 2024.08.22

## ğŸš€ ë°°í¬ ì£¼ì†Œ
- https://thebean.space

## ğŸ˜ í”„ë¡ íŠ¸ ë ˆí¬ì§€í† ë¦¬
- https://thebean.space

## ğŸ‘©â€ğŸ’» íŒ€ì› ì†Œê°œ

| ì´ë¬´ì¤€ | ì´ìˆ˜ì§„ | ë°•ì£¼ë¹ˆ | ì„ìƒì€ |
| --- | --- | --- | --- |
| ![image](https://github.com/user-attachments/assets/3dc27d27-e1e9-4629-85a8-5482b352a11d) | ![image](https://github.com/user-attachments/assets/3f736701-1c2e-4600-9f6f-92475c8b43c8) | ![image](https://github.com/user-attachments/assets/6679fac0-d29c-4e0b-9982-935645cd2a4d) |![image](https://github.com/user-attachments/assets/365aa961-2cf3-4f82-82f9-f969bb00d9e2)  |
| [Moo-moo-11](https://github.com/Moo-moo-11) | [devitssu](https://github.com/devitssu) | [DanDanjoo](https://github.com/DanDanjoo) | [sangeuuun](https://github.com/sangeuuun) |

## ğŸ“– í”„ë¡œì íŠ¸ ê°œìš”   
í”„ë¡œì íŠ¸ ì£¼ì œëŠ” ìˆ™ë°• ì˜ˆì•½ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì—¬í–‰, ì¶œì¥, íœ´ê°€ ë“± ë‹¤ì–‘í•œ ì´ìœ ë¡œ ìˆ™ë°• ì‹œì„¤ì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒë“¤ì„ ìœ„í•´ì„œ êµ­ë‚´ì˜ ìˆ™ë°• ì‹œì„¤ì„ í•œ ëˆˆì— í™•ì¸í•˜ê³  ì˜ˆì•½í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥
ğŸŒŸ **ê³µê°„ ê²€ìƒ‰ ë° ì˜ˆì•½**
- ì›í•˜ëŠ” ë‚ ì§œì™€ ê°€ê²©, í¸ì˜ì‹œì„¤ì— ë§ëŠ” ìˆ™ì†Œë¥¼ í•„í„°ë§ ê²€ìƒ‰

![image](https://github.com/user-attachments/assets/19a51490-2aad-4fd5-9d34-01cf7a9f5654)
- ë³„ì  ìˆœ, ê°€ê²©ìˆœ, ìµœì‹  ë“±ë¡ ìˆœ, ì˜ˆì•½ ë§ì€ ìˆœ ì •ë ¬
- ì¿ í°ì„ ë°œê¸‰ë°›ì•„ í• ì¸ëœ ê°€ê²©ìœ¼ë¡œ ì˜ˆì•½ ê°€ëŠ¥

![image](https://github.com/user-attachments/assets/41bb71ef-7dc8-401e-a816-2d04250dcbc7)

ğŸŒŸ **ë¦¬ë·° ì‘ì„±**
- ì²´í¬ì•„ì›ƒ ì‹œê°„ ì´í›„ ë¦¬ë·° ì‘ì„± ê°€ëŠ¥
- ê³µê°„ ìƒì„¸ í˜ì´ì§€ì—ì„œ ë¦¬ë·° í™•ì¸ ê°€ëŠ¥

![image](https://github.com/user-attachments/assets/e730f9ae-b82d-4fa3-a628-b17ea14e6cfb)

ğŸŒŸ **í˜¸ìŠ¤íŠ¸ ê¸°ëŠ¥**
- ë©”ë‰´íƒ­ì—ì„œ í˜¸ìŠ¤íŠ¸ë¡œ ì „í™˜ ê°€ëŠ¥
  
<img width="709" alt="image" src="https://github.com/user-attachments/assets/5c265ddd-6cdb-46d3-92e9-78c6ec2fd07d">

- ê³µê°„ ë“±ë¡, ì‚­ì œ, ì˜ˆì•½í™•ì¸
  
<img width="1362" alt="image" src="https://github.com/user-attachments/assets/e69ce4ce-7574-4fcb-aa46-81bef154c84e">



## ğŸ— ì•„í‚¤í…ì²˜
![image](https://github.com/user-attachments/assets/e3ab2671-0481-4556-8171-a0218724438d)

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ
- **Front End** 

<img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=white"> <img src="https://img.shields.io/badge/vite-646CFF?style=for-the-badge&logo=vite&logoColor=white"> <img src="https://img.shields.io/badge/vercel-000000?style=for-the-badge&logo=vercel&logoColor=white"> ![MUI](https://img.shields.io/badge/MUI-%230081CB.svg?style=for-the-badge&logo=mui&logoColor=white)

- **Back End** 

<img src="https://img.shields.io/badge/kotlin-7F52FF?style=for-the-badge&logo=kotlin&logoColor=white"> <img src="https://img.shields.io/badge/spring%20boot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white"> <img src="https://img.shields.io/badge/gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white"> <img src="https://img.shields.io/badge/spring%20security-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white"> <img src="https://img.shields.io/badge/Spring%20Data%20JPA-6DB33F?style=for-the-badge"> <img src="https://img.shields.io/badge/Query%20Dsl-0085CA?style=for-the-badge"> ![JWT](https://img.shields.io/badge/JWT-black?style=for-the-badge&logo=JSON%20web%20tokens)
- **DB & Infra**

<img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white"> <img src="https://img.shields.io/badge/docker-2496ED?style=for-the-badge&logo=docker&logoColor=white"> <img src="https://img.shields.io/badge/redis-FF4438?style=for-the-badge&logo=redis&logoColor=white"> <img src="https://img.shields.io/badge/AWS-232F3E?style=for-the-badge&logo=amazonwebservices&logoColor=white"> <img src="https://img.shields.io/badge/github%20actions-2088FF?style=for-the-badge&logo=githubactions&logoColor=white"> <img src="https://img.shields.io/badge/grafana-F46800?style=for-the-badge&logo=grafana&logoColor=white"> <img src="https://img.shields.io/badge/loki-F46800?style=for-the-badge&logoColor=white"> <img src="https://img.shields.io/badge/prometheus-E6522C?style=for-the-badge&logo=prometheus&logoColor=white">


- **Communication** 

<img src="https://img.shields.io/badge/slack-4A154B?style=for-the-badge&logo=slack&logoColor=white"> <img src="https://img.shields.io/badge/notion-000000?style=for-the-badge&logo=notion&logoColor=white"> <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white"> <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">

## ê¸°ìˆ ì  ì˜ì‚¬ ê²°ì •


## íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
<details>
<summary><h3>CORS ë¬¸ì œ ë°œìƒ</h3></summary>

> ë¬¸ì œ
 
í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚´ë„ CORS ì •ì±…ì— ì˜í•´ ë§‰í˜”ë‹¤ëŠ” ë¬¸êµ¬ê°€ ëœ¨ë©´ì„œ ì •ìƒì ìœ¼ë¡œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ì—ˆëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤  

 
![image](https://github.com/user-attachments/assets/7ff9db09-898e-4602-862e-61b20b10deed)

> ì›ì¸

CORS ë¬¸ì œì˜ ê·¼ë³¸ì ì¸ ì›ì¸ì€ ë¸Œë¼ìš°ì €ì˜ SOP(ë™ì¼ ì¶œì²˜ ì •ì±…, Single Origin Policy). ì„œë²„ë¼ë¦¬ ë¦¬ì†ŒìŠ¤ ê³µìœ ê°€ ê°€ëŠ¥í•˜ë„ë¡ í•©ì˜ëœ ì¶œì²˜ë“¤ ê°„ì—ë§Œ ë¦¬ì†ŒìŠ¤ ê³µìœ ë¥¼ í—ˆìš©í•´ì£¼ê¸°ìœ„í•œ CORS ì„¤ì •ì„ í•´ì£¼ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ìœ„ì˜ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤

> í•´ê²° ê³¼ì •

í•´ê²°ë²• ìì²´ëŠ” ê°„ë‹¨í•œ ê²€ìƒ‰ë§Œìœ¼ë¡œë„ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆì—ˆê³ , ì ìš©í•˜ëŠ” ê²ƒë„ ì–´ë µì§€ ì•Šì•˜ìŠµë‹ˆë‹¤

ë‹¨ìˆœíˆ í•´ê²°ë²•ë§Œ ì•Œê³  ë„˜ì–´ê°€ê¸°ë³´ë‹¤ëŠ” ë¬¸ì œê°€ ë°œìƒí•œ ê·¼ë³¸ì ì¸ ì´ìœ ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ ë…¸ë ¥í•˜ì˜€ìŠµë‹ˆë‹¤

ìœ„ ë¬¸ì œ ì´í›„ì—ë„ S3 ì´ë¯¸ì§€ ì €ì¥ì†Œì˜ PresignedUrlì„ ì´ìš©í•  ë•Œë„ CORS ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ëŠ”ë°, ì›ì¸ì„ ì•Œê³ ìˆë‹¤ë³´ë‹ˆ ì–´ë””ë¥¼ ìˆ˜ì •í•´ì•¼í• ì§€ íŒŒì•…í•˜ê¸°ê°€ ì‰¬ì› ìŠµë‹ˆë‹¤. S3 ì €ì¥ì†Œì˜ ì„¤ì •ì— ë“¤ì–´ê°€ì„œ CORS ì„¤ì •ë§Œ í•´ì£¼ë©´ ë˜ì—ˆìŠµë‹ˆë‹¤.

> í•´ê²° ë°©ë²•

Spring Securityë¥¼ ì´ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— SecurityConfig íŒŒì¼ì— ìˆëŠ” FilterChainì— ë‹¤ìŒê³¼ ê°™ì´ CORS ì„¤ì •ì„ ìœ„í•œ ì½”ë“œë¥¼ ì¶”ê°€í•´ì£¼ëŠ” ê²ƒìœ¼ë¡œ ì‰½ê²Œ CORS ì„¤ì •ì´ ê°€ëŠ¥í•˜ì˜€ìŠµë‹ˆë‹¤

ì„¤ì •ì´ ê°„ë‹¨í–ˆê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ì˜€ì§€ë§Œ, ì„¤ì •ì´ ë³µì¡í•´ì§€ê±°ë‚˜ í•´ë‹¹ ë‚´ìš©ì„ ì¬ì‚¬ìš©í•  í•„ìš”ê°€ ìƒê¸°ëŠ” ê²½ìš°ì—ëŠ” ë”°ë¡œ Config íŒŒì¼ì„ ë§Œë“¤ì–´ Beanìœ¼ë¡œ ë“±ë¡í•´ ì‚¬ìš©í•´ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤
 
 
```sql
@Bean
    fun filterChain(http: HttpSecurity): SecurityFilterChain {
        return http
            .cors { cors ->
                cors.configurationSource {
                    val configuration = CorsConfiguration()
                    configuration.allowedOrigins =
                        listOf("https://bean-space-front.vercel.app/")
                    configuration.allowedMethods = listOf("GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS")
                    configuration.allowedHeaders = listOf(
                        "X-Requested-With",
                        "Content-Type",
                        "Authorization",
                        "Origin",
                        "Accept",
                        "Access-Control-Request-Method",
                        "Access-Control-Request-Headers"
                    )
                    configuration.allowCredentials = true
                    configuration
                }
            }
            .httpBasic { it.disable() }
            // ... ì¤‘ëµ
``` 
</details>


### ì˜ˆì•½ì‹œ ì¿ í°ì„ ë„£ì§€ ì•Šìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œ

> **ë¬¸ì œ**

ì˜ˆì•½í•  ë•Œ ìœ ì €ê°€ ì¿ í°ì´ ì—†ì„ ìˆ˜ë„ ìˆê³ , ì¿ í°ì„ ì ìš©í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆëŠ”ë°ë„ ë¶ˆêµ¬í•˜ê³  ë°˜ë“œì‹œ ì¿ í°ì´ ìˆì–´ì•¼ë§Œ ì˜ˆì•½ì´ ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.
> 

> **ì›ì¸**

ì›ì¸ì€ ë‹¨ìˆœíˆ ì¿ í°ì„ ì ìš©í•œ ê²½ìš°ì™€ ì•„ë‹Œ ê²½ìš°ë¥¼ êµ¬ë¶„í•˜ì—¬ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼í–ˆëŠ”ë° ë°˜ë“œì‹œ í•„ìš”í•˜ë‹¤ê³  ê°€ì •í•˜ê³  ì½”ë“œë¥¼ ì‘ì„±í–ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
> 

> **í•´ê²° ê³¼ì •**

ì˜ˆì•½ì˜ ê²½ìš°ëŠ” í”„ë¡œì íŠ¸ì—ì„œ ê°€ì¥ í•µì‹¬ê¸°ëŠ¥ì´ì—ˆê³  ë§ì€ ì˜ˆì™¸ì²˜ë¦¬ì™€ ë³µì¡í•œ ë¡œì§ì´ ë“¤ì–´ìˆì—ˆê¸° ë•Œë¬¸ì— ì‹ ê²½ì¨ì•¼í•  ë¶€ë¶„ì´ ë§ì•˜ìŠµë‹ˆë‹¤.

ë•Œë¬¸ì— ì¿ í°ì„ ì ìš©í•˜ê³  ì¿ í° ì ìš©ì— ë§ì¶° ê³„ì‚°í•˜ëŠ” ê²ƒì— ì´ˆì ì„ ë§ì¶”ë‹¤ë³´ë‹ˆ ì¿ í°ì´ ì—†ëŠ” ê²½ìš°ë¥¼ ì™„ì „íˆ ë†“ì¹˜ê³  ì½”ë“œë¥¼ ì‘ì„±í•œ ê²ƒì„ ì½”ë“œ ë¦¬ë·°ì™€ í…ŒìŠ¤íŠ¸ ê³¼ì •ì—ì„œ ë°œê²¬í•˜ì˜€ìŠµë‹ˆë‹¤.

ì¿ í°ì´ ì—†ëŠ” ê²½ìš°ì— ëŒ€í•´ì„œ ë‹¤ì‹œ ì½”ë“œë¥¼ ì‘ì„±í•¨ìœ¼ë¡œì¨ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
> 

> **í•´ê²° ë°©ë²•**

ì¿ í°ì´ ì—†ëŠ” ê²½ìš° Requestì—ì„œ ì¿ í°ì„ ë³´ë‚´ì§€ ì•Šê²Œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.(Nullableë¡œ ë§Œë“¬)

Safe Callì„ í™œìš©í•˜ì—¬ Requestì—ì„œ ì¿ í° IDê°€ nullì¼ ê²½ìš° ì²´ì´ë‹ìœ¼ë¡œ ëª¨ë“  í˜¸ì¶œì„ ê±´ë„ˆë›°ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

Requestì— ì¿ í° IDê°€ ë¹„ì–´ìˆë‹¤ë©´ ê±°ì˜ ëª¨ë“  ê³¼ì •ì„ ê±´ë„ˆ ë›°ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ ì‰½ê²Œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. 

```kotlin
val userCoupon = request.userCouponId?.let {
                    val couponKey = "userCoupon:$it"
                    couponLock = redissonClient.getLock(couponKey)

                    try {
                        if (!couponLock!!.tryLock(5, 10, TimeUnit.SECONDS)) {
                            throw IllegalStateException("ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì¿ í°ì…ë‹ˆë‹¤.")
                        }
                        log.info { "LOCK COUPON KEY : $couponKey" }

                        userCouponRepository.findByIdOrNull(it)
                            ?: throw ModelNotFoundException("UserCoupon", it)
                    } catch (e: RuntimeException) {
                        couponLock?.unlock()
                        couponLock = null
                        throw e
                    }
                }?.also {
                    check(it.isCouponUnused()) { throw IllegalStateException("ì´ë¯¸ ì‚¬ìš©í•œ ì¿ í°ì…ë‹ˆë‹¤.") }
                }?.also {
                    check(it.coupon.isNotExpired()) { throw IllegalStateException("ì¿ í°ì˜ ìœ íš¨ê¸°ê°„ì„ í™•ì¸í•´ì£¼ì„¸ìš”.") }
                }
```

### ì‚­ì œëœ ë¦¬ë·°ê°€ í‘œì‹œë˜ëŠ” ë¬¸ì œì™€ ë¦¬ë·° ì‚­ì œ ì´í›„ ë¦¬ë·° ì‘ì„± ê°€ëŠ¥ í‘œì‹œ ì˜¤ë¥˜ ë¬¸ì œ

> **ë¬¸ì œ**

ë¦¬ë·°ë¥¼ ì‚­ì œí•´ë„ ì—¬ì „íˆ ì¡°íšŒë˜ëŠ” ë¬¸ì œë¥¼ ë°œê²¬í•˜ì˜€ìŠµë‹ˆë‹¤.

ë˜í•œ ë¦¬ë·°ëŠ” í•˜ë‚˜ì˜ ì˜ˆì•½ì— ëŒ€í•´ í•˜ë‚˜ì˜ ë¦¬ë·°ë§Œ ì‘ì„± ê°€ëŠ¥í•˜ë„ë¡ ë˜ì–´ìˆê³  ì •ì±…ìƒ ë¦¬ë·° ì‚­ì œ ì´í›„ì— ë‹¤ì‹œ ë¦¬ë·° ì‘ì„±ì´ ë¶ˆê°€ëŠ¥í–ˆìœ¼ë‚˜, ë¦¬ë·° ì‘ì„± ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ì¡°íšŒì‹œ ë¦¬ë·° ì‚­ì œ ì´í›„ì—ë„ ë¦¬ë·°ê°€ ì‘ì„± ê°€ëŠ¥í•˜ë‹¤ê³  í‘œì‹œë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
> 

> **ì›ì¸**

Soft Deleteë¥¼ ì´ìš©í•´ ì‚­ì œë¥¼ êµ¬í˜„í–ˆëŠ”ë° ì¡°íšŒ ê³¼ì •ì—ì„œ ì‚­ì œ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì§€ ì•Šê³  ì¡°íšŒë¥¼ í•˜ê³  ìˆì–´ ì‚­ì œëœ ë¦¬ë·°ê°€ ë…¸ì¶œë˜ëŠ” ê²ƒì´ ì›ì¸ì´ì—ˆìŠµë‹ˆë‹¤.

ìœ„ì˜ ë¬¸ì œê°€ ê³ ì³ì§„ ì´í›„ì— ë‹¤ë¥¸ ë¬¸ì œê°€ ë°œìƒí–ˆëŠ”ë°, ë¦¬ë·° ì‘ì„± ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ì¡°íšŒí•  ë•Œ í•´ë‹¹ ì˜ˆì•½ì— ëŒ€í•œ ë¦¬ë·°ê°€ ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ ì¡°íšŒí•˜ê²Œ ë˜ëŠ”ë°, ì´ë•Œì—ëŠ” Soft Deleteë¡œ ì‚­ì œëœ ë¦¬ë·°ë„ ì¡°íšŒê°€ ë˜ì•¼í•˜ì§€ë§Œ @SQLRestriction ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ Soft Deleteë¥¼ êµ¬í˜„í•˜ì˜€ë‹¤ë³´ë‹ˆ ì´ë•Œì—ëŠ” ë˜ ì¡°íšŒê°€ ë˜ì§€ ì•Šì•„ì„œ ë¦¬ë·°ê°€ ë‹¤ì‹œ ì‘ì„± ê°€ëŠ¥í•œ ê²ƒ ì²˜ëŸ¼ í‘œì‹œë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.
> 

> **í•´ê²° ê³¼ì •**

ë¨¼ì € ë¦¬ë·°ë¥¼ ì‚­ì œí•´ë„ ì—¬ì „íˆ ë¦¬ë·°ê°€ ë…¸ì¶œë˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê±´ ì‰½ê²Œ í•´ê²°ì´ ê°€ëŠ¥í–ˆìŠµë‹ˆë‹¤.

@SQLRestrictionì´ë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©í•˜ì—¬ ì¡°íšŒì‹œ ì‚­ì œëœ ë¦¬ë·°ê°€ ëª¨ë‘ ì¡°íšŒë˜ì§€ ì•Šë„ë¡ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
> 
> 
> ```kotlin
> @Entity
> @SQLRestriction("is_deleted = false")
> class Review(
>     @Column
>     var content: String,
>     
> // ...ì¤‘ëµ
> ```
> 
> í•˜ì§€ë§Œ ìœ„ì™€ ê°™ì´ ë§Œë“¤ì—ˆë”ë‹ˆ ë¬¸ì œê°€ í•˜ë‚˜ ìƒê²¼ëŠ”ë° Soft Deleteë¡œ ì‚­ì œëœ ë¦¬ë·°ë„ ì¡°íšŒí•´ì•¼í•  ê²½ìš°ê°€ ìˆì—ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
> 
> í•˜ë‚˜ì˜ ì˜ˆì•½ì— ëŒ€í•´ í•˜ë‚˜ì˜ ë¦¬ë·°ë§Œ ì‘ì„±í•  ìˆ˜ ìˆëŠ”ë°, í•œ ë²ˆ ë¦¬ë·°ë¥¼ ì‘ì„±í–ˆë‹¤ê°€ ì‚­ì œí•˜ë©´ ê·¸ ì´í›„ì—ëŠ” ë¦¬ë·°ë¥¼ ë‹¤ì‹œ ì‘ì„±í•  ìˆ˜ ì—†ë„ë¡ ë§Œë“¤ì–´ì•¼ í–ˆìŠµë‹ˆë‹¤.
> 
> ë¦¬ë·°ë¥¼ ì‘ì„±í–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ë‚´ë³´ë‚´ì¤˜ì•¼í•´ì„œ í•´ë‹¹ ì˜ˆì•½ì— ëŒ€í•´ ë¦¬ë·°ê°€ ìˆë‚˜ ì—†ë‚˜ë¥¼ ì¡°íšŒí•´ì•¼ í–ˆëŠ”ë° @SQLRestriction ë•Œë¬¸ì— ì´ë•Œ ë¦¬ë·°ê°€ ë‹¬ë ¤ìˆì§€ ì•Šë‹¤ê³  ì¡°íšŒê°€ ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
> 
> ìœ„ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ìœ„ì˜ @SQLRestrictionì„ ê±´ë„ˆë›°ê³  ì¿¼ë¦¬ê°€ ë°œìƒí•˜ë„ë¡ NativeQueryë¥¼ ì‘ì„±í•˜ê¸°ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤.
> 
> ```kotlin
> @Query("SELECT reservation_id FROM review WHERE reservation_id IN (:reservationIds)", nativeQuery = true)
>     fun findReservationIdsByReservationIdIn(reservationIds: List<Long>): List<Long>
> ```
> 
> ìœ„ì™€ ê°™ì´ NativeQueryë¥¼ ì§ì ‘ ì‘ì„±í•˜ì—¬ Soft Deleteë¡œ ì‚­ì œëœ ë¦¬ë·°ë„ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ì˜€ê³  ì •ìƒì ìœ¼ë¡œ ë¦¬ë·° ì‘ì„± ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ì‘ë‹µìœ¼ë¡œ ë‚´ë³´ë‚¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
> 

> **í•´ê²° ë°©ë²•**

@SQLRestriction ì´ë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ ì‚­ì œëœ ë¦¬ë·°ê°€ ì¡°íšŒë˜ì§€ ì•Šë„ë¡ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

ìœ„ì˜ ì–´ë…¸í…Œì´ì…˜ì„ ê±´ë„ˆë›°ê³  ì‚­ì œëœ ë¦¬ë·°ë„ ì¡°íšŒê°€ ë˜ì–´ì•¼í•˜ëŠ” ê²½ìš°ì—ëŠ” NativeQueryë¥¼ ì§ì ‘ ì‘ì„±í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.
> 

### ë¶„ì‚°ë½ ì ìš© ì´í›„ì—ë„ ì¿ í°ì´ ì´ˆê³¼ ë°œê¸‰ë˜ëŠ” ë¬¸ì œ

> **ë¬¸ì œ**

Redisë¥¼ ì´ìš©í•œ ë¶„ì‚°ë½ì„ ì ìš©í•˜ì˜€ì§€ë§Œ ì—¬ì „íˆ ë™ì‹œì„± ì œì–´ í™•ì¸ì„ ìœ„í•´ ë§Œë“  í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.
> 
> 
> ë½ ì ìš© ì´ì „ë³´ë‹¤ëŠ” í›¨ì”¬ ë‚˜ì•„ì§„ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ì—ˆì§€ë§Œ (200ì¥ ë°œê¸‰ë˜ì–´ì•¼í•  ì¿ í°ì´ 300ì¥ì”© ë°œê¸‰ ë˜ë˜ê²Œ 205ì¥ìœ¼ë¡œ ì¤„ì–´ë“¬) ì—¬ì „íˆ ë™ì‹œì„± ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.
> 
> ![fail3.PNG](https://prod-files-secure.s3.us-west-2.amazonaws.com/df9ec1cb-7780-4165-a1d3-15a865604475/42a3c0c7-bb21-4a8c-8ee7-fa5a9295903b/fail3.png)
> 

> **ì›ì¸**
> 
> 
> ë¡œê·¸ë¥¼ í™•ì¸í•˜ë‹ˆ ìŠ¤ë ˆë“œë³„ë¡œ ë½ì´ ê±¸ë ¤ìˆëŠ”ê±´ ë§ìœ¼ë‚˜ ì¿¼ë¦¬ê°€ ì»¤ë°‹ë˜ëŠ” ì‹œì ì´ ë½ì´ í•´ì œëœ í›„ì˜€ìŠµë‹ˆë‹¤.
> 
> ë½ì´ í•´ì œë˜ê³  ì¿¼ë¦¬ê°€ ì»¤ë°‹ë˜ëŠ” ì‹œê°„ ì‚¬ì´ì— ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ì ‘ê·¼í•˜ê²Œ ë˜ì–´ ë°œìƒí•œ ë¬¸ì œì…ë‹ˆë‹¤.
> 
> ì•„ë˜ì²˜ëŸ¼ ë½ì´ í•´ì œë˜ëŠ” ì‹œì ê³¼ íŠ¸ëœì­ì…˜ì´ ì¢…ë£Œë˜ëŠ” ì‹œì  ì‚¬ì´ì— ë‹¤ë¥¸ ìš”ì²­ì´ ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ ì»¤ë°‹ ë˜ê¸° ì „ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê³  ë³€ê²½í•˜ê²Œ ë©ë‹ˆë‹¤.
> 
> ```kotlin
> **1. íŠ¸ëœì­ì…˜ ì‹œì‘
> 
> 2. ë½ì„ íšë“í•˜ëŠ” ì‹œì 
> 
> 3. ì¿ í° ë°œê¸‰
> 
> 4. ë½ì´ í•´ì œë˜ëŠ” ì‹œì 
> 
> (ì´ ì§§ì€ ì°°ë‚˜ì— ë“¤ì–´ì˜¨ ìš”ì²­ì€ ì»¤ë°‹ì´ ë˜ê¸° ì „ì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê²Œ ë¨)
> 
> 5 .íŠ¸ëœì­ì…˜ ì¢…ë£Œ(ì»¤ë°‹ ì‹œì )**
> ```
> 

> **í•´ê²° ê³¼ì •**
> 
> 
> 
> ë¨¼ì € ë¬¸ì œ íŒŒì•…ì´ êµ‰ì¥íˆ ì–´ë ¤ì› ìŠµë‹ˆë‹¤. ë¶„ëª… ê²°ê³¼ë§Œ ë³´ì•„ë„ ë™ì‹œì„± ì œì–´ê°€ ë˜ê³  ìˆëŠ” ê²ƒ ê°™ì€ë° ì¼ë¶€ë§Œ ì‹¤íŒ¨ë¥¼ í•˜ê²Œë˜ë‹ˆ ì›ì¸ íŒŒì•…ì´ ì‰½ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
> 
> ë¡œê·¸ë¥¼ ìì„¸íˆ ì‚´í´ë³´ê³  ì˜¤ëœ ì‹œê°„ ê³ ë¯¼ê³¼ ê²€ìƒ‰ ëì— í•´ë‹¹ ë¬¸ì œë¥¼ íŒŒì•…í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
> 
> ë¡œê·¸ë¥¼ ìì„¸íˆ í™•ì¸í•˜ë‹ˆ ìŠ¤ë ˆë“œë³„ë¡œ ë½ì´ ê±¸ë¦°ê²ƒì€ í™•ì¸ë˜ì—ˆì§€ë§Œ ì»¤ë°‹ ì „ì— ë½ì„ íšë“í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
> 
> íŠ¸ëœì­ì…˜ ë²”ìœ„ë¥¼ ì¡°ì •í•´ì•¼í•œë‹¤ëŠ” ê²ƒì„ ì•Œê²Œë˜ì—ˆê³ , ì–´ë–»ê²Œ ì¡°ì •í• ì§€ ì—¬ëŸ¬ ë°©ë²•ì„ ì°¾ì•„ë³¸ í›„ì— í•˜ë‚˜ë¥¼ ì ìš©í•´ì„œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
> 
> ë¬¸ì œê°€ í•´ê²°ëœ ì´í›„ì—ëŠ” ì •ìƒì ìœ¼ë¡œ ë¯¸ë¦¬ ì‘ì„±í•´ ë‘” í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ëª¨ë‘ í†µê³¼í•˜ì˜€ìŠµë‹ˆë‹¤.
> 
> ![success 2.PNG](https://prod-files-secure.s3.us-west-2.amazonaws.com/df9ec1cb-7780-4165-a1d3-15a865604475/eade9ac5-db08-4e01-bee0-e15205777c49/success_2.png)
> 

> **í•´ê²° ë°©ë²•**

ë½ì´ í•´ì œëœ ì´í›„ì— íŠ¸ëœì­ì…˜ì´ ì¢…ë£Œë˜ê³  ì»¤ë°‹ì´ ë˜ë„ë¡ ì½”ë“œë¥¼ ë‹¤ì‹œ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

ì•„ë˜ì™€ ê°™ì´ ì‘ë™í•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
> 
> 
> ```kotlin
> íŠ¸ëœì­ì…˜ ì‹œì‘
> 
> ë½ì´ ê±¸ë¦¬ëŠ” ì‹œì 
> 
> íŠ¸ëœì­ì…˜ ì¢…ë£Œ(ì»¤ë°‹ ì‹œì )
> 
> ë½ì´ í•´ì œë˜ëŠ” ì‹œì 
> ```
> 
> ì°¾ì•„ë³¸ ê²°ê³¼ `TransactionTemplate`  ì´ë¼ëŠ” ê²ƒì„ ì´ìš©í•´ ì‰½ê²Œ íŠ¸ëœì­ì…˜ ë²”ìœ„ë¥¼ ì›í•˜ëŠ” ëŒ€ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆê³  ì´ê²ƒì„ ì´ìš©í•´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.
> 
> ```kotlin
> fun issueCoupon(memberId: Long, couponId: Long) {
>     val key = "coupon:$couponId"
>     val lock = redissonClient.getLock(key)
> 
>     try {
>         if (!lock.tryLock(5, 10, TimeUnit.SECONDS)) throw IllegalStateException("ì¿ í° ë°œí–‰ì„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”")
> 
>         transactionTemplate.execute {
>             /*
>             ì¿ í° ë°œê¸‰ ë¡œì§
>             */
>         }
>     } finally {
>         if (lock.isHeldByCurrentThread) {
>             lock.unlock()
>         }
>     }
> }
> ```
> 

### Time Zoneì— ì˜í•œ ë¬¸ì œ ë°œìƒ

> **ë¬¸ì œ**
> 
> 
> 
> ë°œê¸‰ ì‹œì‘ëœ ì¿ í°ì´ ë°œê¸‰ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.
> 

> **ì›ì¸**
> 
> 
> ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/df9ec1cb-7780-4165-a1d3-15a865604475/1b057102-5187-41ce-88e2-f9f79066078a/image.png)
> 
> DBì™€ ì„œë²„ì˜ íƒ€ì„ì¡´ì´ ì¼ì¹˜í•˜ì§€ ì•Šì•„ ë°œìƒí•œ ë¬¸ì œì˜€ìŠµë‹ˆë‹¤. DBëŠ” Asia/Seoul íƒ€ì„ì¡´ìœ¼ë¡œ ì‹œê°„ì´ ì €ì¥ë˜ì–´ ìˆì—ˆìœ¼ë‚˜, ì„œë²„ëŠ” UTCë¥¼ ì‚¬ìš©í•˜ê³  ìˆì–´ `LocalDateTime.now()`ë¡œ ì‹œê°„ì„ ì²´í¬í•  ë•Œ 9ì‹œê°„ì˜ ì˜¤ì°¨ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.
> 

> **í•´ê²° ê³¼ì •**
> 
> 
> ì„œë²„ ë¡œê·¸ë¥¼ í™•ì¸í•˜ì—¬ ì¿ í° ë°œê¸‰ ìš”ì²­ ì‹œê°„ê³¼ ë¡œê·¸ì— ê¸°ë¡ëœ ì‹œê°„ì„ ë¹„êµí•´ë³´ë‹ˆ 9ì‹œê°„ì˜ ì°¨ì´ê°€ ìˆëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ì„œë²„ì˜ `LocalDateTime` ê¸°ì¤€ì´ UTCë¡œ ì„¤ì •ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒì„ íŒŒì•…í•˜ê³ , ë¬¸ì œ í•´ê²° ë°©ë²•ì„ ì°¾ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ê¸°ë³¸ íƒ€ì„ì¡´ ì„¤ì •ì„ Asia/Seoulë¡œ ë³€ê²½í•˜ë©´ ë¬¸ì œê°€ í•´ê²°ëœë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆê³ , ì´ë¥¼ ì ìš©í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.
> 

> **í•´ê²° ë°©ë²•**
> 
> 
> ìŠ¤í”„ë§ë¶€íŠ¸ì˜ ê¸°ë³¸ TimeZone ì„¤ì •ì„ Asia/Seoulë¡œ ë³€ê²½í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.
> ì•„ë˜ì™€ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ íƒ€ì„ì¡´ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> 
> ```kotlin
> @SpringBootApplication
> class BeanSpaceApplication
> 
> fun main(args: Array<String>) {
> 		//Default TimeZone ì„¤ì •
>     TimeZone.setDefault(TimeZone.getTimeZone(ZoneId.of("Asia/Seoul")))
>     runApplication<BeanSpaceApplication>(*args)
> }
> ```
> 
> ìœ„ ì½”ë“œë¥¼ ì ìš©í•˜ë©´ ì„œë²„ì˜ íƒ€ì„ì¡´ì´ Asia/Seoulë¡œ ì„¤ì •ë˜ì–´ DBì™€ ì„œë²„ ê°„ì˜ ì‹œê°„ ì°¨ì´ê°€ ë°œìƒí•˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.
> 

### ë„ˆë¬´ ëŠë¦° ë©”ì¸ í˜ì´ì§€ ë¡œë”©ê³¼ ê²€ìƒ‰ ë¬¸ì œ

> **ë¬¸ì œ**

ë°ì´í„° ê°œìˆ˜ê°€ ì ì„ ë•ŒëŠ” ë³„ ë¬¸ì œê°€ ì—†ì—ˆìœ¼ë‚˜ ë”ë¯¸ ë°ì´í„°ë¥¼ ë§Œë“¤ì–´ ë°ì´í„° ì–‘ì„ ë§ì´ ëŠ˜ë ¸ë”ë‹ˆ ë©”ì¸ í˜ì´ì§€ ë¡œë”©ê³¼ ê²€ìƒ‰ ê¸°ëŠ¥ì˜ ì„±ëŠ¥ì´ ëŠë ¤ì§„ ê²Œ ì²´ê°ë˜ê¸° ì‹œì‘í•˜ì˜€ìŠµë‹ˆë‹¤.

ë°°í¬ ì´í›„ í…ŒìŠ¤íŠ¸ ìœ ì € ì‚¬ì´ì—ì„œë„ ë©”ì¸ í˜ì´ì§€ ë¡œë”©ì´ ë„ˆë¬´ ëŠë¦¬ë‹¤ë¼ëŠ” í”¼ë“œë°±ë„ ìˆì—ˆìŠµë‹ˆë‹¤.
> 

> **ì›ì¸**

ë”ë¯¸ ë°ì´í„°ì˜ ê°œìˆ˜ê°€ ë§ì•„ì§€ë‹ˆ ë©”ì¸ í˜ì´ì§€ì— ìˆëŠ” â€˜ê°€ì¥ ì˜ˆì•½ì´ ë§ì€ ê³µê°„ TOP4â€™ ë¶€ë¶„ê³¼ ê²€ìƒ‰ ê¸°ëŠ¥ì´ ë§ì´ ëŠë ¤ì ¸ ë¡œë”© ì‹œê°„ì´ ê¸¸ì–´ì¡ŒìŠµë‹ˆë‹¤.

í•´ë‹¹ ë¶€ë¶„ë“¤ì´ ì„œë¹„ìŠ¤ ì „ì²´ì—ì„œ ê°€ì¥ ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ì¿¼ë¦¬ë“¤ì´ì—ˆê³  ë©”ì¸ ê¸°ëŠ¥ì´ì—ˆê¸° ë•Œë¬¸ì— ë” ëˆˆì— ë„ëŠ”ê²Œ ë¬¸ì œì˜€ìŠµë‹ˆë‹¤.

êµ¬í˜„ì„ ìš°ì„ ìˆœìœ„ë¡œ ì‚¼ê³  ì„±ëŠ¥ ìµœì í™”ë¥¼ ì§„í–‰í•˜ì§€ ì•Šê³  ë°°í¬í–ˆê¸° ë•Œë¬¸ì— ìœ„ì™€ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.
> 

> **í•´ê²° ê³¼ì •**

ì„±ëŠ¥ìµœì í™”ì˜ í•„ìš”ì„±ì´ ëª…í™•í•´ì¡Œê¸° ë•Œë¬¸ì— ì°¨ê·¼ì°¨ê·¼ ìµœì í™”ë¥¼ ì§„í–‰í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ë¨¼ì € ë¶ˆí•„ìš”í•œ JOINì´ë¼ë˜ê°€ íš¨ìœ¨ì ì´ì§€ ëª»í•œ ì¿¼ë¦¬ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ì§€ë¥¼ ì°¨ê·¼ì°¨ê·¼ ì‚´í´ë³´ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ë³µì¡í•œ ì¿¼ë¦¬ í•˜ë‚˜ë¥¼ ì¡°ê¸ˆì´ë‚˜ë§ˆ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

ê·¸ëŸ° ë‹¤ìŒ ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì¡°íšŒ ì„±ëŠ¥ì„ ëŒì–´ì˜¬ë¦´ ìˆ˜ ìˆëŠ”ì§€ ì ìš©í•´ë³´ê³  í…ŒìŠ¤íŠ¸í•˜ëŠ” ì‹œê°„ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤.

ê·¸ë¦¬ê³  ìì£¼ ë°ì´í„°ê°€ ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ìºì‹œ ë„ì…ì„ ê³ ë ¤í•˜ì˜€ê³ , ìºì‹œë¥¼ ë„ì…í•˜ì—¬ ì„±ëŠ¥ì„ í¬ê²Œ í–¥ìƒ ì‹œí‚¬ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
> 

> **í•´ê²° ë°©ë²•**

QueryDslë¡œ ì‘ì„±í•œ ì¿¼ë¦¬ë“¤ì„ ì§ì ‘ í™•ì¸í•˜ì—¬ ì–´ë–¤ ì¿¼ë¦¬ë“¤ì´ ë°œìƒí•˜ëŠ”ì§€ë¥¼ ì­‰ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.

ê·¸ ì¤‘ì—ì„œ ì–´ë–¤ ì¿¼ë¦¬ê°€ ì˜¤ë˜ ê±¸ë¦¬ëŠ”ì§€ íŒŒì•…í•œ ë’¤ í•´ë‹¹ ì¿¼ë¦¬ë“¤ì„ ìˆ˜ì •í•˜ê¸°ë„ í–ˆê³ , ì¿¼ë¦¬ë¥¼ ë³´ë©´ì„œ ìì£¼ ë°œìƒí•˜ëŠ” ì¿¼ë¦¬ì™€ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì¿¼ë¦¬ì— ì¸ë±ìŠ¤ë¥¼ ì ìš©í•˜ì—¬ ì¿¼ë¦¬ ì„±ëŠ¥ì„ í¬ê²Œ ëŒì–´ì˜¬ë¦´ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

ì˜ˆì‹œ) ìì£¼ ë°œìƒí•˜ëŠ” ì¿¼ë¦¬ë“¤
> 
> 
> ```sql
> SELECT DISTINCT s.id, AVG(r.rating) AS rating
>   FROM space s
>      LEFT JOIN review r ON r.space_id = s.id AND r.is_deleted = false
> WHERE s.status = 'ACTIVE'
>   AND s.id NOT IN (
>     SELECT space_id
>     FROM reservation
>     WHERE check_in < '2024-08-18'
>        AND check_out > '2024-08-17'
>        AND is_cancelled = false
>         )
>   AND s.max_people >= 1
>   AND s.is_deleted = false
> GROUP BY s.id
> ORDER BY rating DESC, s.id DESC;
> ```
> 
> ```sql
> SELECT DISTINCT s.id, COUNT(r.id) AS count
> FROM space s
>   LEFT JOIN reservation r ON r.space_id = s.id
>     AND r.is_cancelled = false
>     AND r.created_at >= '2024-08-09'
> WHERE s.status = 'ACTIVE'
>   AND s.id NOT IN (
>     SELECT r2.space_id
>     FROM reservation r2
>     WHERE r2.check_in < '2024-08-18'
>        AND r2.check_out > '2024-08-17'
>     AND r2.is_cancelled = false
> )
>   AND s.max_people >= 1
>   AND s.is_deleted = false
> GROUP BY s.id
> ORDER BY count, s.id DESC;
> ```
> 
> ì•„ë˜ ì²˜ëŸ¼ ì‹¤í–‰ ê³„íšë„ í™•ì¸í•˜ì—¬ ì¸ë±ìŠ¤ê°€ ì˜ í™œìš©ë˜ê³  ìˆëŠ”ì§€ë„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.
> 
> ![hh.PNG](https://prod-files-secure.s3.us-west-2.amazonaws.com/df9ec1cb-7780-4165-a1d3-15a865604475/cf8d84a5-1028-40fb-911a-212eb1ed7eb0/hh.png)
> 
> ë˜í•œ ìì£¼ ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì¸ ë©”ì¸í˜ì´ì§€ì˜ â€˜ìµœê·¼ ì¼ì£¼ì¼ ê°€ì¥ ì˜ˆì•½ì´ ë§ì€ ìˆ™ì†Œ TOP4â€™ì—ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì´ìš©í•´ì„œ ì¼ì • ì‹œê°„ë§ˆë‹¤ ìºì‹œë¥¼ ì—…ë°ì´íŠ¸ ì‹œì¼œì£¼ê³  ì¡°íšŒí•  ë•ŒëŠ” ìºì‹œì—ì„œ ë¶ˆëŸ¬ì˜¤ëŠ” ì‹ìœ¼ë¡œ ë§Œë“¤ì–´ í¬ê²Œ ëŒì–´ì˜¬ë¦´ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
> 
> ***ì„±ëŠ¥ ìµœì í™” ì´ì „ í‰ê·  ì‘ë‹µ ì‹œê°„**
> 
> ê²€ìƒ‰ ê¸°ëŠ¥: 1.01 ì´ˆ
> ê°€ì¥ ì˜ˆì•½ ë§ì€ ìˆ™ì†Œ TOP 4: 1.41 ì´ˆ*
> 
> ***ì„±ëŠ¥ ìµœì í™” ì´í›„ í‰ê·  ì‘ë‹µ ì‹œê°„**
> 
> ê²€ìƒ‰ ê¸°ëŠ¥: 0.42 ì´ˆ (1.01ì´ˆ â†’ 0.42ì´ˆ) **ì•½ 60% ì‘ë‹µì‹œê°„ ê°ì†Œ**
> ê°€ì¥ ì˜ˆì•½ ë§ì€ ìˆ™ì†Œ TOP 4: 0.281ì´ˆ (1.41ì´ˆ â†’ 0.281ì´ˆ) **ì•½ 80% ì‘ë‹µì‹œê°„ ê°ì†Œ***
> 
> ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/df9ec1cb-7780-4165-a1d3-15a865604475/351c4fa2-2517-4432-b1ba-e4d065eb5543/image.png)
> 
> ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/df9ec1cb-7780-4165-a1d3-15a865604475/1a501027-4392-446d-857b-ca4f251858bb/image.png)
> 

### Email ì¸ì¦ ì•ˆí•´ì„œ ë„ë©”ì¸ ì •ì§€ëœ ë¬¸ì œ

> **ë¬¸ì œ**

ì‚¬ì´íŠ¸ ë°°í¬ê°€ ì™„ë£Œë˜ê³  ìœ ì € í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ë˜ ì¤‘ ìƒˆë²½ì— ê°‘ìê¸° ì‚¬ì´íŠ¸ ì ‘ì†ì´ ë¶ˆê°€ëŠ¥í•œ ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.
> 

> **ì›ì¸**
> 
> 
> 
> Route 53ì— ìƒˆ ë„ë©”ì¸ì„ ë“±ë¡í•˜ëŠ” ê²½ìš° ë“±ë¡ìì˜ E-mail ì£¼ì†Œê°€ ìœ íš¨í•œì§€ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. AWSì—ì„œ í™•ì¸ì„ ìœ„í•œ ì´ë©”ì¼ ë§í¬ë¥¼ ë³´ë‚´ì£¼ëŠ”ë° 15ì¼ ì•ˆì— ì´ ë§í¬ë¥¼ í´ë¦­í•˜ì§€ ì•Šìœ¼ë©´ ë„ë©”ì¸ì´ ì¼ì‹œ ì¤‘ì§€ ë©ë‹ˆë‹¤.
> 
> ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/df9ec1cb-7780-4165-a1d3-15a865604475/2b2ad091-eb13-4df4-a65f-cbd71ed025aa/image.png)
> 
> ì´ ë¶€ë¶„ì„ ë†“ì³ì„œ ë„ë©”ì¸ì´ ì¼ì‹œ ì¤‘ì§€ë˜ì–´ ì‚¬ì´íŠ¸ ì ‘ì†ì´ ë¶ˆê°€ëŠ¥í•˜ì˜€ìŠµë‹ˆë‹¤.
> 

> **í•´ê²° ê³¼ì •**

ê°‘ìê¸° ì‚¬ì´íŠ¸ì— ì ‘ì†ì´ ë¶ˆê°€ëŠ¥í–ˆê³ , ì„œë²„ëŠ” ì •ìƒì ìœ¼ë¡œ ë™ì‘ì¤‘ì´ì—ˆê¸° ë•Œë¬¸ì— ì›ì¸ì„ íŒŒì•…í•˜ê¸°ê°€ ì‰½ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

ì‚¬ì´íŠ¸ì— ì ‘ì†í•˜ë©´ â€˜DNS_PROBE_FINISHED_NXDOMAINâ€™ë¼ëŠ” ë¬¸êµ¬ê°€ ë–´ê³  í•´ë‹¹ ë¬¸êµ¬ëŠ” ë„ë©”ì¸ ì´ë¦„ì„ IP ì£¼ì†Œë¡œ ë³€í™˜í•  ìˆ˜ ì—†ì„ ë•Œ ë°œìƒí•œë‹¤ëŠ” ê²ƒì„ íŒíŠ¸ë¡œ ì‚¼ì•„ ë¬¸ì œë¥¼ ì°¾ê¸° ì‹œì‘í•˜ì˜€ìŠµë‹ˆë‹¤.

ì›ì¸ì„ íŒŒì•…í•˜ê¸° ìœ„í•´ AWS ì´ê³³ì €ê³³ì— ì ‘ì†í•˜ëŠ” ë“± ê½¤ ì˜¤ëœ ì‹œê°„ì„ ë³´ë‚´ë˜ ì™€ì¤‘ì— Route 53ì— ì ‘ì†í–ˆë‹¤ê°€ E-mail ë¯¸ì¸ì¦ìœ¼ë¡œ ì¸í•´ ë„ë©”ì¸ì´ Suspension(ì¼ì‹œ ì¤‘ì§€) ë˜ì—ˆë‹¤ëŠ” ë¬¸êµ¬ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

E-mail ì¬ë°œì†¡ì„ ìš”ì²­í•œ ë’¤ ì¸ì¦í•˜ì˜€ë”ë‹ˆ ë¬¸ì œë¥¼ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
> 
> 
> 
> ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/df9ec1cb-7780-4165-a1d3-15a865604475/c3baeeb8-072d-4fc2-8664-0fd1f8b13588/image.png)
> 

> **í•´ê²° ë°©ë²•**

E-mail ì¬ë°œì†¡ì„ ìš”ì²­í•œ ë’¤ ì¸ì¦í•˜ì˜€ë”ë‹ˆ 1ì‹œê°„ ì•ˆìœ¼ë¡œ ë„ë©”ì¸ì´ ë³µêµ¬ ë˜ì—ˆìŠµë‹ˆë‹¤.
****
> 
> 
> ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/df9ec1cb-7780-4165-a1d3-15a865604475/4eb72d07-1f7b-4652-abf8-6373492e5970/image.png)
> 

### 502 BadGateway

> **ë¬¸ì œ**
> 
> 
> ì„œë²„ ë°°í¬í›„ ì ‘ì†ì„ ì‹œë„í–ˆìœ¼ë‚˜ 502 BadGateway ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.
> 

> **ì›ì¸**
> 
> 
> Nginx ì„¤ì • ë¬¸ì œì˜€ìŠµë‹ˆë‹¤. Elastic Beanstalk ìƒì„±ì‹œ Docker ê¸°ë°˜ìœ¼ë¡œ í”Œë«í¼ì„ ì„¤ì •í•˜ë©´ì„œ `proxy_pass`ê°€ `http://docker`ë¡œ ì§€ì •ë˜ì–´ ìˆì—ˆê³ , Nginxê°€ ì´ ëŒ€ìƒì„ ì°¾ì§€ ëª»í•´ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
> 

> **í•´ê²° ê³¼ì •**
> 
> 
> 502 Bad Gateway ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í†µí•´ Nginxê°€ ê´€ë ¨ëœ ë¬¸ì œì„ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. Nginxë¥¼ ë³„ë„ë¡œ ì„¤ì¹˜í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì™œ ì´ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ì§€ í™•ì¸í•´ë³´ë‹ˆ, AWS Elastic Beanstalkë¡œ EC2ë¥¼ ì„¤ì •í•  ë•Œ ê¸°ë³¸ì ìœ¼ë¡œ Nginxê°€ ì„¤ì¹˜ëœ ê²ƒì´ ì›ì¸ì´ì—ˆìŠµë‹ˆë‹¤. Nginx ì„¤ì • ë¬¸ì œì„ì„ ì¸ì§€í•˜ê³  ì„¤ì • íŒŒì¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ì„¤ì • íŒŒì¼ ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ì•˜ìŠµë‹ˆë‹¤.
> 
> ```
> ...
> server {
>         listen 80 default_server;
>         gzip on;
>         gzip_comp_level 4;
>         gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;
> 
>         access_log    /var/log/nginx/access.log main;
> 
>         location / {
>             proxy_pass            http://docker;
>             proxy_http_version    1.1;
>             proxy_set_header    Connection             $connection_upgrade;
>             proxy_set_header    Upgrade                $http_upgrade;
>             proxy_set_header    Host                   $host;
>             proxy_set_header    X-Real-IP              $remote_addr;
>             proxy_set_header    X-Forwarded-For        $proxy_add_x_forwarded_for;
>         }
>     ...
> ```
> 
> `proxy_pass` ê°€ `http://docker` ë¡œ ë˜ì–´ìˆì—ˆìŠµë‹ˆë‹¤.
> 

> **í•´ê²° ë°©ë²•**
> 
> 
> Docker ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ë•Œ `docker run -p 5000:8080` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ Tomcatì˜ 8080 í¬íŠ¸ë¥¼ ì™¸ë¶€ì˜ 5000 í¬íŠ¸ë¡œ ì—°ê²°í–ˆìŠµë‹ˆë‹¤. ì´í›„, Nginx ì„¤ì • íŒŒì¼ì˜ `proxy_pass` ê°’ì„ `http://localhost:5000`ìœ¼ë¡œ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
> 
> ```
> ...
> server {
>         listen 80 default_server;
>         gzip on;
>         gzip_comp_level 4;
>         gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;
> 
>         access_log    /var/log/nginx/access.log main;
> 
>         location / {
>             proxy_pass            http://localhost:5000;
>             proxy_http_version    1.1;
>             proxy_set_header    Connection             $connection_upgrade;
>             proxy_set_header    Upgrade                $http_upgrade;
>             proxy_set_header    Host                   $host;
>             proxy_set_header    X-Real-IP              $remote_addr;
>             proxy_set_header    X-Forwarded-For        $proxy_add_x_forwarded_for;
>         }
>     ...
> ```
> 
> ì´ë ‡ê²Œ ì„¤ì •í•¨ìœ¼ë¡œì¨ ë¡œë“œ ë°¸ëŸ°ì„œë¥¼ í†µí•´ ë“¤ì–´ì˜¨ HTTP ìš”ì²­ì´ Nginxë¥¼ ê±°ì³ `http://localhost:5000`ìœ¼ë¡œ ì „ë‹¬ë˜ì—ˆê³ , Docker ì»¨í…Œì´ë„ˆ ë‚´ì˜ Spring ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ìš”ì²­ì´ ë„ë‹¬í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´í›„ 502 Bad Gateway ì˜¤ë¥˜ëŠ” ë°œìƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
> 

### ë°°í¬ ì´í›„ í”¼ë“œë°± ê³¼ì •ì—ì„œ í•´ê²°í•œ ë¬¸ì œë“¤

> **ë¬¸ì œ**

ìœ ì € í…ŒìŠ¤íŠ¸ í”¼ë“œë°±ì— ë§ì€ ë²„ê·¸ë“¤ì´ ì œë³´ë˜ì—ˆìŠµë‹ˆë‹¤

í”„ë¡ íŠ¸
- ë‚ ì§œ ì„ íƒì„ ìœ„í•œ ìº˜ë¦°ë”ê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•ŠëŠ” ë¬¸ì œ
- ì—”í„°í‚¤ë¥¼ ì´ìš©í•´ ê²€ìƒ‰ì´ ë¶ˆê°€ëŠ¥í•œ ë¬¸ì œ
- ì •ë ¬ ê¸°ì¤€ì„ ë°”ê¾¸ì–´ë„ í˜ì´ì§€ê°€ 1ë¡œ ëŒì•„ì˜¤ì§€ ì•ŠëŠ” ë¬¸ì œ
- ê¸°íƒ€ ë“±ë“±

ë°±ì—”ë“œ
- ì´ë¯¸ì§€ê°€ í•„ìˆ˜ê°€ ì•„ë‹˜ì—ë„ ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ ë¦¬ë·°ê°€ ì‘ì„±ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ
- íšŒì› ê°€ì…ì‹œ ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í•˜ëŠ” ë¬¸ì œ
- ì˜ˆì•½ ê¸ˆì•¡ì´ ë„ˆë¬´ ë†’ì•„ì§€ë©´ ì˜¤ë²„í”Œë¡œìš°ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œ
> 
> 
> ![312.PNG](https://prod-files-secure.s3.us-west-2.amazonaws.com/df9ec1cb-7780-4165-a1d3-15a865604475/70cd771c-dd12-4385-af44-ef497f2c94d2/312.png)
> 

> **ì›ì¸**

ê·¼ë³¸ì ì¸ ì›ì¸ì€ ë°°í¬ ì´ì „ ë©´ë°€í•˜ê²Œ í…ŒìŠ¤íŠ¸ ì „ì²´ë¥¼ ëŒë©´ì„œ í…ŒìŠ¤íŠ¸í•˜ì§€ ëª»í•´ ë²„ê·¸ë“¤ì„ ë¯¸ì²˜ ë°œê²¬í•˜ì§€ ëª»í–ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ë°°í¬ ì§ì „ê¹Œì§€ë„ ìˆ˜ì •ì„ ê±°ë“­í–ˆê¸° ë•Œë¬¸ì— ì‹œê°„ì´ ë¹ ë“¯í–ˆë˜ ê²ƒë„ ì›ì¸ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.

ìœ íš¨ì„± ê²€ì‚¬ì˜ ê²½ìš°ì—ëŠ” í•˜ë£¨ ë‚ ì„ ì¡ì•„ ì „ì²´ì ìœ¼ë¡œ ì ê²€ì„ í–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³ , ì—¬ëŸ¬ êµ¬ë©ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. íŒ€ ì°¨ì›ì—ì„œ ë” ê¼¼ê¼¼í•˜ê²Œ ì‚´í´ë³´ê³  íšŒì˜í•˜ëŠ” ì‹œê°„ì„ ê°€ì¡Œì–´ì•¼ í•˜ì§€ ì•Šì•˜ë‚˜ í•˜ëŠ” ì•„ì‰¬ì›€ë„ ìˆì—ˆìŠµë‹ˆë‹¤.
> 

> **í•´ê²° ê³¼ì •**

í”„ë¡ íŠ¸ì—ëŠ” ì •ë§ ë§ì€ ë¬¸ì œë“¤ì´ ë°œìƒí•˜ì˜€ëŠ”ë° ì „ë¶€ ê³ ì¹˜ê¸°ëŠ” ì–´ë ¤ì› ì§€ë§Œ ìµœëŒ€í•œ ê³ ì¹  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì„ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤. ìœ ì €ì˜ ì˜ê²¬ì„ ìµœëŒ€í•œ ë°˜ì˜í•´ì„œ ìœ ì €ê°€ í¸í•˜ê²Œ ëŠë‚„ ìˆ˜ ìˆë„ë¡ í˜ì¼ìŠµë‹ˆë‹¤.

*- ì´ë¯¸ì§€ê°€ í•„ìˆ˜ê°€ ì•„ë‹˜ì—ë„ ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ ë¦¬ë·°ê°€ ì‘ì„±ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ*

ì´ë¯¸ì§€ê°€ í•„ìˆ˜ê°€ ì•„ë‹ˆì—ˆëŠ”ë° ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ ë¦¬ë·°ê°€ ì‘ì„±ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìˆë‹¤ëŠ” í”¼ë“œë°±ì´ ë“¤ì–´ì™€ì„œ í™•ì¸í•´ë³´ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì•Œê³ ë³´ë‹ˆ AddReviewRequest ìª½ì— ì´ë¯¸ì§€ë¶€ë¶„ì—@NotEmpty ì–´ë…¸í…Œì´ì…˜ì´ ê±¸ë ¤ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

í•´ë‹¹ ë¶€ë¶„ì„ ì œê±°í•˜ê³  ì´ë¯¸ì§€ê°€ ì—†ì´ë„ ë¦¬ë·°ë¥¼ ë“±ë¡í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

*- íšŒì› ê°€ì…ì‹œ ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í•˜ëŠ” ë¬¸ì œ*

ì €í¬ ì„œë¹„ìŠ¤ì—ëŠ” ê³µê°„ ì‚¬ì§„ê³¼ ë¦¬ë·° ì‚¬ì§„, í”„ë¡œí•„ ì‚¬ì§„ë“± ì‚¬ì§„ì´ ì—¬ê¸°ì €ê¸°ì„œ ì´ìš©ë˜ëŠ”ë°, PresignedUrl ë°œê¸‰ì—ëŠ” ì¸ì¦ì´ ë°˜ë“œì‹œ í•„ìš”í•œ ê²½ìš°ë§Œ ìˆë‹¤ê³  ìƒê°í•˜ì—¬ í•´ë‹¹ URIì— ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ì¸ì¦ì´ í•„ìš”í•˜ë„ë¡ ë§Œë“  ê²ƒì´ ë¬¸ì œì˜€ìŠµë‹ˆë‹¤.

ë•Œë¬¸ì— ì•„ì§ ì¸ì¦ì´ ë˜ì§€ ì•Šì€ íšŒì›ê°€ì…ì„ ì‹œë„í•˜ë ¤ëŠ” ìœ ì €ê°€ í”„ë¡œí•„ ì‚¬ì§„ì„ íšŒì›ê°€ì… ì‹œì— ì—…ë¡œë“œ í•˜ë ¤ê³  í•  ë•Œ ë¬¸ì œê°€ ë°œìƒí–ˆë˜ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.

PresignedUrl ë°œê¸‰ì‹œ ì¸ì¦ì´ í•„ìš”ì—†ë„ë¡ ìˆ˜ì •í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

*- ì˜ˆì•½ ê¸ˆì•¡ì´ ë„ˆë¬´ ë†’ì•„ì§€ë©´ ì˜¤ë²„í”Œë¡œìš°ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œ*

ì €í¬ê°€ ì˜ˆì•½ ê¸ˆì•¡ì„ ê³„ì‚°í•˜ëŠ” ë¡œì§ì—ì„œ ë¶„ëª… ëª¨ë“  ë¶€ë¶„ì„ Long í˜•ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë“± ì²˜ë¦¬ë¥¼ í•´ë†“ì•˜ê¸° ë•Œë¬¸ì— ì˜¤ë²„ í”Œë¡œìš°ê°€ ë°œìƒí•  ìˆ˜ ì—†ë‹¤ê³  ìƒê°í–ˆëŠ”ë° ìœ ì € í…ŒìŠ¤íŠ¸ì—ì„œ ì´ëŸ° ê²½ìš°ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

í™•ì¸ ê²°ê³¼ ì˜ˆì•½ ê¸ˆì•¡ì„ ê³„ì‚°í•˜ëŠ” ê³¼ì • ì¤‘ê°„ì— Intë¡œ ê³„ì‚°ë˜ëŠ” ë¶€ë¶„ì´ ìˆìŒì„ ë°œê²¬í•˜ê²Œ ë˜ì—ˆê³  í•´ë‹¹ ë¶€ë¶„ì— toLong()ì„ ì¶”ê°€í•˜ì—¬ Long í˜•ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ê³„ì‚°í•˜ë„ë¡ ë§Œë“¤ì–´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
****
> 

> **í•´ê²° ë°©ë²•**

í”„ë¡ íŠ¸ì˜ ê²½ìš° ë¬¸ì œ í•´ê²° ë°©ë²•ì„ ìì„¸íˆ ì ì§€ëŠ” ì•Šê² ìŠµë‹ˆë‹¤.

*****- ì´ë¯¸ì§€ê°€ í•„ìˆ˜ê°€ ì•„ë‹˜ì—ë„ ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ ë¦¬ë·°ê°€ ì‘ì„±ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ*

@NotEmpty ì–´ë…¸í…Œì´ì…˜ì„ ì‚­ì œí•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
****
> 
> 
> ```kotlin
> @field:Size(max = 3, message = "ë¦¬ë·° ì´ë¯¸ì§€ëŠ” ìµœëŒ€ 3ê°œê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤.")
> val imageUrlList: List<String>,
> ```
> 
> *- íšŒì› ê°€ì…ì‹œ ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í•˜ëŠ” ë¬¸ì œ*
> 
> presignedUrl ë°œê¸‰ì‹œ ì¸ì¦ì´ í•„ìš”ì—†ë„ë¡ ë³€ê²½í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
> 
> SecurityConfigì˜ RequestMatchesì— presignedUrl ë°œê¸‰ì„ ìœ„í•œ URIë¥¼ ì¶”ê°€í•˜ì˜€ìŠµë‹ˆë‹¤.
> 
> ```kotlin
> .requestMatchers(
>                         "/healthcheck",
>                         "/swagger-ui/**",
>                         "/v3/api-docs/**",
>                         "/api/v1/auth/sign-up",
>                         "/api/v1/auth/login",
>                         "/error",
>                         "/api/v1/spaces/**",
>                         "/oauth2/login/**",
>                         "/actuator/prometheus",
>                         "/api/v1/images/presigned-url"
>                     ).permitAll()
> ```
> 
> *- ì˜ˆì•½ ê¸ˆì•¡ì´ ë„ˆë¬´ ë†’ì•„ì§€ë©´ ì˜¤ë²„í”Œë¡œìš°ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œ*
> 
> ì•„ë˜ ì½”ë“œì— ì›ë˜ toLong()ì´ ì—†ì—ˆëŠ”ë° ê·¸ ë¶€ë¶„ì—ì„œ ê°€ê²©ì´ ë„ˆë¬´ ë†’ì•„ì§€ë©´ Int í˜• ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ ì˜¤ë²„í”Œë¡œìš°ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
> 
> ê³„ì‚° ì¤‘ê°„ì— Int í˜•ì´ ì—†ë„ë¡ ì‹ ê²½ì¨ì„œ ì²˜ìŒì— ì½”ë“œë¥¼ ì‘ì„±í–ˆìŒì—ë„ ë¯¸ì²˜ ë°œê²¬í•˜ì§€ ëª»í•´ì„œ ì•„ì‰¬ì›€ì´ ë‚¨ì•˜ìŠµë‹ˆë‹¤.
> 
> ```kotlin
> fun calculateTotalCost(headCount: Int, stayDays: Long): Long {
>         return (this.price + (headCount - this.defaultPeople).coerceAtLeast(0) * this.pricePerPerson.toLong()) * stayDays
>     }
> ```
>

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
â”œâ”€â”€ BeanSpaceApplication.kt
â”œâ”€â”€ api
â”‚Â Â  â”œâ”€â”€ HealthCheckController.kt
â”‚Â Â  â”œâ”€â”€ admin
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AdminController.kt
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AdminService.kt
â”‚Â Â  â”‚Â Â  â””â”€â”€ dto
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ RequestAddSpaceResponse.kt
â”‚Â Â  â”‚Â Â      â””â”€â”€ UpdateSpaceStatus.kt
â”‚Â Â  â”œâ”€â”€ auth
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AuthController.kt
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AuthService.kt
â”‚Â Â  â”‚Â Â  â””â”€â”€ dto
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ GetNewAccessTokenRequest.kt
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ LoginRequest.kt
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ LoginResponse.kt
â”‚Â Â  â”‚Â Â      â””â”€â”€ SignUpRequest.kt
â”‚Â Â  â”œâ”€â”€ coupon
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ CouponController.kt
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ CouponService.kt
â”‚Â Â  â”‚Â Â  â””â”€â”€ dto
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ CouponRequest.kt
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ CouponResponse.kt
â”‚Â Â  â”‚Â Â      â””â”€â”€ UserCouponResponse.kt
â”‚Â Â  â”œâ”€â”€ host
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ HostController.kt
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ HostService.kt
â”‚Â Â  â”‚Â Â  â””â”€â”€ dto
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ AddSpaceRequest.kt
â”‚Â Â  â”‚Â Â      â””â”€â”€ UpdateSpaceRequest.kt
â”‚Â Â  â”œâ”€â”€ image
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ImageController.kt
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ImageService.kt
â”‚Â Â  â”‚Â Â  â””â”€â”€ dto
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ PreSignedUrlRequest.kt
â”‚Â Â  â”‚Â Â      â””â”€â”€ PreSignedUrlResponse.kt
â”‚Â Â  â”œâ”€â”€ member
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ MemberController.kt
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ MemberService.kt
â”‚Â Â  â”‚Â Â  â””â”€â”€ dto
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ MemberProfileResponse.kt
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ MemberReservationResponse.kt
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ UpdateProfileRequest.kt
â”‚Â Â  â”‚Â Â      â””â”€â”€ UpdateSocialUserInfoRequest.kt
â”‚Â Â  â”œâ”€â”€ oauth
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ KakaoOAuth2Client.kt
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ OAuth2LoginController.kt
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ OAuth2LoginService.kt
â”‚Â Â  â”‚Â Â  â””â”€â”€ dto
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ KakaoLoginUserInfoResponse.kt
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ KakaoTokenResponse.kt
â”‚Â Â  â”‚Â Â      â””â”€â”€ KakaoUserPropertiesResponse.kt
â”‚Â Â  â”œâ”€â”€ reservation
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ReservationController.kt
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ReservationService.kt
â”‚Â Â  â”‚Â Â  â””â”€â”€ dto
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ ReservationRequest.kt
â”‚Â Â  â”‚Â Â      â””â”€â”€ ReservationResponse.kt
â”‚Â Â  â””â”€â”€ space
â”‚Â Â      â”œâ”€â”€ SpaceController.kt
â”‚Â Â      â”œâ”€â”€ SpaceService.kt
â”‚Â Â      â””â”€â”€ dto
â”‚Â Â          â”œâ”€â”€ AddReviewRequest.kt
â”‚Â Â          â”œâ”€â”€ CompactSpaceResponse.kt
â”‚Â Â          â”œâ”€â”€ HostResponse.kt
â”‚Â Â          â”œâ”€â”€ OfferResponse.kt
â”‚Â Â          â”œâ”€â”€ PopularKeywordsResponse.kt
â”‚Â Â          â”œâ”€â”€ ReviewResponse.kt
â”‚Â Â          â”œâ”€â”€ SpaceDetailResponse.kt
â”‚Â Â          â”œâ”€â”€ SpaceResponse.kt
â”‚Â Â          â”œâ”€â”€ SpaceResponseWithoutAddress.kt
â”‚Â Â          â””â”€â”€ UpdateReviewRequest.kt
â”œâ”€â”€ domain
â”‚Â Â  â”œâ”€â”€ common
â”‚Â Â  â”‚Â Â  â””â”€â”€ BaseTimeEntity.kt
â”‚Â Â  â”œâ”€â”€ coupon
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ model
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Coupon.kt
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ UserCoupon.kt
â”‚Â Â  â”‚Â Â  â””â”€â”€ repository
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ CouponRepository.kt
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ CouponRepositoryImpl.kt
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ CustomCouponRepository.kt
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ CustomUserCouponRepository.kt
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ UserCouponRepository.kt
â”‚Â Â  â”‚Â Â      â””â”€â”€ UserCouponRepositoryImpl.kt
â”‚Â Â  â”œâ”€â”€ exception
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AuthenticationException.kt
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ GlobalExceptionHandler.kt
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ InvalidImageException.kt
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ModelNotFoundException.kt
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ NoPermissionException.kt
â”‚Â Â  â”‚Â Â  â””â”€â”€ dto
â”‚Â Â  â”‚Â Â      â””â”€â”€ ErrorResponse.kt
â”‚Â Â  â”œâ”€â”€ image
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ model
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Image.kt
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ ImageType.kt
â”‚Â Â  â”‚Â Â  â””â”€â”€ repository
â”‚Â Â  â”‚Â Â      â””â”€â”€ ImageRepository.kt
â”‚Â Â  â”œâ”€â”€ member
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ model
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Member.kt
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ MemberRole.kt
â”‚Â Â  â”‚Â Â  â””â”€â”€ repository
â”‚Â Â  â”‚Â Â      â””â”€â”€ MemberRepository.kt
â”‚Â Â  â”œâ”€â”€ reservation
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ model
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ Reservation.kt
â”‚Â Â  â”‚Â Â  â””â”€â”€ repository
â”‚Â Â  â”‚Â Â      â””â”€â”€ ReservationRepository.kt
â”‚Â Â  â””â”€â”€ space
â”‚Â Â      â”œâ”€â”€ model
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Address.kt
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Offer.kt
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Review.kt
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ SearchKeyword.kt
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Space.kt
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ SpaceOffer.kt
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ SpaceStatus.kt
â”‚Â Â      â”‚Â Â  â””â”€â”€ Wishlist.kt
â”‚Â Â      â””â”€â”€ repository
â”‚Â Â          â”œâ”€â”€ OfferRepository.kt
â”‚Â Â          â”œâ”€â”€ ReviewRepository.kt
â”‚Â Â          â”œâ”€â”€ SearchKeywordQueryDslRepository.kt
â”‚Â Â          â”œâ”€â”€ SearchKeywordQueryDslRepositoryImpl.kt
â”‚Â Â          â”œâ”€â”€ SearchKeywordRepository.kt
â”‚Â Â          â”œâ”€â”€ SpaceOfferRepository.kt
â”‚Â Â          â”œâ”€â”€ SpaceQueryDslRepository.kt
â”‚Â Â          â”œâ”€â”€ SpaceQueryDslRepositoryImpl.kt
â”‚Â Â          â”œâ”€â”€ SpaceRepository.kt
â”‚Â Â          â””â”€â”€ WishListRepository.kt
â””â”€â”€ infra
    â”œâ”€â”€ log
    â”‚Â Â  â””â”€â”€ LogFilter.kt
    â”œâ”€â”€ querydsl
    â”‚Â Â  â””â”€â”€ QueryDslConfig.kt
    â”œâ”€â”€ redis
    â”‚Â Â  â”œâ”€â”€ RedisConfig.kt
    â”‚Â Â  â””â”€â”€ RedisUtils.kt
    â”œâ”€â”€ restclient
    â”‚Â Â  â””â”€â”€ RestClientConfig.kt
    â”œâ”€â”€ s3
    â”‚Â Â  â”œâ”€â”€ S3Config.kt
    â”‚Â Â  â”œâ”€â”€ S3Service.kt
    â”‚Â Â  â””â”€â”€ imagevalidator
    â”‚Â Â      â”œâ”€â”€ ImageValidator.kt
    â”‚Â Â      â””â”€â”€ ValidationResult.kt
    â”œâ”€â”€ security
    â”‚Â Â  â”œâ”€â”€ CustomAccessDeniedHandler.kt
    â”‚Â Â  â”œâ”€â”€ CustomAuthenticationEntrypoint.kt
    â”‚Â Â  â”œâ”€â”€ config
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ PasswordEncoderConfig.kt
    â”‚Â Â  â”‚Â Â  â””â”€â”€ SecurityConfig.kt
    â”‚Â Â  â”œâ”€â”€ dto
    â”‚Â Â  â”‚Â Â  â””â”€â”€ UserPrincipal.kt
    â”‚Â Â  â””â”€â”€ jwt
    â”‚Â Â      â”œâ”€â”€ JwtAuthenticationFilter.kt
    â”‚Â Â      â”œâ”€â”€ JwtAuthenticationToken.kt
    â”‚Â Â      â””â”€â”€ JwtPlugin.kt
    â””â”€â”€ swagger
        â””â”€â”€ SwaggerConfig.kt
```

## ğŸ“Œ í™˜ê²½ì„¤ì •
- Language: Kotlin
- IDE: Intellij, VSCode
- SDK: Eclipse Temurin 18.0.2

## ğŸ“œ ë¼ì´ì„ ìŠ¤
ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ë¥¼ ë”°ë¦…ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](https://github.com/bean-space/bean-space-front/blob/dev/LICENSE) íŒŒì¼ì„ ì°¸ê³ í•˜ì„¸ìš”.
